{"ast":null,"code":"import { FlattenedEncrypt, unprotected } from '../flattened/encrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport generateCek from '../../lib/cek.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { encode as base64url } from '../../runtime/base64url.js';\nimport validateCrit from '../../lib/validate_crit.js';\nclass IndividualRecipient {\n  constructor(enc, key, options) {\n    this.parent = enc;\n    this.key = key;\n    this.options = options;\n  }\n  setUnprotectedHeader(unprotectedHeader) {\n    if (this.unprotectedHeader) {\n      throw new TypeError('setUnprotectedHeader can only be called once');\n    }\n    this.unprotectedHeader = unprotectedHeader;\n    return this;\n  }\n  addRecipient() {\n    return this.parent.addRecipient(...arguments);\n  }\n  encrypt() {\n    return this.parent.encrypt(...arguments);\n  }\n  done() {\n    return this.parent;\n  }\n}\nexport class GeneralEncrypt {\n  constructor(plaintext) {\n    this._recipients = [];\n    this._plaintext = plaintext;\n  }\n  addRecipient(key, options) {\n    const recipient = new IndividualRecipient(this, key, {\n      crit: options === null || options === void 0 ? void 0 : options.crit\n    });\n    this._recipients.push(recipient);\n    return recipient;\n  }\n  setProtectedHeader(protectedHeader) {\n    if (this._protectedHeader) {\n      throw new TypeError('setProtectedHeader can only be called once');\n    }\n    this._protectedHeader = protectedHeader;\n    return this;\n  }\n  setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n    if (this._unprotectedHeader) {\n      throw new TypeError('setSharedUnprotectedHeader can only be called once');\n    }\n    this._unprotectedHeader = sharedUnprotectedHeader;\n    return this;\n  }\n  setAdditionalAuthenticatedData(aad) {\n    this._aad = aad;\n    return this;\n  }\n  async encrypt(options) {\n    var _a, _b, _c;\n    if (!this._recipients.length) {\n      throw new JWEInvalid('at least one recipient must be added');\n    }\n    options = {\n      deflateRaw: options === null || options === void 0 ? void 0 : options.deflateRaw\n    };\n    if (this._recipients.length === 1) {\n      const [recipient] = this._recipients;\n      const flattened = await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(recipient.unprotectedHeader).encrypt(recipient.key, {\n        ...recipient.options,\n        ...options\n      });\n      let jwe = {\n        ciphertext: flattened.ciphertext,\n        iv: flattened.iv,\n        recipients: [{}],\n        tag: flattened.tag\n      };\n      if (flattened.aad) jwe.aad = flattened.aad;\n      if (flattened.protected) jwe.protected = flattened.protected;\n      if (flattened.unprotected) jwe.unprotected = flattened.unprotected;\n      if (flattened.encrypted_key) jwe.recipients[0].encrypted_key = flattened.encrypted_key;\n      if (flattened.header) jwe.recipients[0].header = flattened.header;\n      return jwe;\n    }\n    let enc;\n    for (let i = 0; i < this._recipients.length; i++) {\n      const recipient = this._recipients[i];\n      if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, recipient.unprotectedHeader)) {\n        throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n      }\n      const joseHeader = {\n        ...this._protectedHeader,\n        ...this._unprotectedHeader,\n        ...recipient.unprotectedHeader\n      };\n      const {\n        alg\n      } = joseHeader;\n      if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n      }\n      if (alg === 'dir' || alg === 'ECDH-ES') {\n        throw new JWEInvalid('\"dir\" and \"ECDH-ES\" alg may only be used with a single recipient');\n      }\n      if (typeof joseHeader.enc !== 'string' || !joseHeader.enc) {\n        throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n      }\n      if (!enc) {\n        enc = joseHeader.enc;\n      } else if (enc !== joseHeader.enc) {\n        throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter must be the same for all recipients');\n      }\n      validateCrit(JWEInvalid, new Map(), recipient.options.crit, this._protectedHeader, joseHeader);\n      if (joseHeader.zip !== undefined) {\n        if (!this._protectedHeader || !this._protectedHeader.zip) {\n          throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n        }\n      }\n    }\n    const cek = generateCek(enc);\n    let jwe = {\n      ciphertext: '',\n      iv: '',\n      recipients: [],\n      tag: ''\n    };\n    for (let i = 0; i < this._recipients.length; i++) {\n      const recipient = this._recipients[i];\n      const target = {};\n      jwe.recipients.push(target);\n      const joseHeader = {\n        ...this._protectedHeader,\n        ...this._unprotectedHeader,\n        ...recipient.unprotectedHeader\n      };\n      const p2c = joseHeader.alg.startsWith('PBES2') ? 2048 + i : undefined;\n      if (i === 0) {\n        const flattened = await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(cek).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(recipient.unprotectedHeader).setKeyManagementParameters({\n          p2c\n        }).encrypt(recipient.key, {\n          ...recipient.options,\n          ...options,\n          [unprotected]: true\n        });\n        jwe.ciphertext = flattened.ciphertext;\n        jwe.iv = flattened.iv;\n        jwe.tag = flattened.tag;\n        if (flattened.aad) jwe.aad = flattened.aad;\n        if (flattened.protected) jwe.protected = flattened.protected;\n        if (flattened.unprotected) jwe.unprotected = flattened.unprotected;\n        target.encrypted_key = flattened.encrypted_key;\n        if (flattened.header) target.header = flattened.header;\n        continue;\n      }\n      const {\n        encryptedKey,\n        parameters\n      } = await encryptKeyManagement(((_a = recipient.unprotectedHeader) === null || _a === void 0 ? void 0 : _a.alg) || ((_b = this._protectedHeader) === null || _b === void 0 ? void 0 : _b.alg) || ((_c = this._unprotectedHeader) === null || _c === void 0 ? void 0 : _c.alg), enc, recipient.key, cek, {\n        p2c\n      });\n      target.encrypted_key = base64url(encryptedKey);\n      if (recipient.unprotectedHeader || parameters) target.header = {\n        ...recipient.unprotectedHeader,\n        ...parameters\n      };\n    }\n    return jwe;\n  }\n}","map":{"version":3,"names":["FlattenedEncrypt","unprotected","JWEInvalid","generateCek","isDisjoint","encryptKeyManagement","encode","base64url","validateCrit","IndividualRecipient","constructor","enc","key","options","parent","setUnprotectedHeader","unprotectedHeader","TypeError","addRecipient","encrypt","done","GeneralEncrypt","plaintext","_recipients","_plaintext","recipient","crit","push","setProtectedHeader","protectedHeader","_protectedHeader","setSharedUnprotectedHeader","sharedUnprotectedHeader","_unprotectedHeader","setAdditionalAuthenticatedData","aad","_aad","_a","_b","_c","length","deflateRaw","flattened","jwe","ciphertext","iv","recipients","tag","protected","encrypted_key","header","i","joseHeader","alg","Map","zip","undefined","cek","target","p2c","startsWith","setContentEncryptionKey","setKeyManagementParameters","encryptedKey","parameters"],"sources":["C:/Users/hherenu/Desktop/Proyectos/login/node_modules/jose/dist/browser/jwe/general/encrypt.js"],"sourcesContent":["import { FlattenedEncrypt, unprotected } from '../flattened/encrypt.js';\r\nimport { JWEInvalid } from '../../util/errors.js';\r\nimport generateCek from '../../lib/cek.js';\r\nimport isDisjoint from '../../lib/is_disjoint.js';\r\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\r\nimport { encode as base64url } from '../../runtime/base64url.js';\r\nimport validateCrit from '../../lib/validate_crit.js';\r\nclass IndividualRecipient {\r\n    constructor(enc, key, options) {\r\n        this.parent = enc;\r\n        this.key = key;\r\n        this.options = options;\r\n    }\r\n    setUnprotectedHeader(unprotectedHeader) {\r\n        if (this.unprotectedHeader) {\r\n            throw new TypeError('setUnprotectedHeader can only be called once');\r\n        }\r\n        this.unprotectedHeader = unprotectedHeader;\r\n        return this;\r\n    }\r\n    addRecipient(...args) {\r\n        return this.parent.addRecipient(...args);\r\n    }\r\n    encrypt(...args) {\r\n        return this.parent.encrypt(...args);\r\n    }\r\n    done() {\r\n        return this.parent;\r\n    }\r\n}\r\nexport class GeneralEncrypt {\r\n    constructor(plaintext) {\r\n        this._recipients = [];\r\n        this._plaintext = plaintext;\r\n    }\r\n    addRecipient(key, options) {\r\n        const recipient = new IndividualRecipient(this, key, { crit: options === null || options === void 0 ? void 0 : options.crit });\r\n        this._recipients.push(recipient);\r\n        return recipient;\r\n    }\r\n    setProtectedHeader(protectedHeader) {\r\n        if (this._protectedHeader) {\r\n            throw new TypeError('setProtectedHeader can only be called once');\r\n        }\r\n        this._protectedHeader = protectedHeader;\r\n        return this;\r\n    }\r\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\r\n        if (this._unprotectedHeader) {\r\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\r\n        }\r\n        this._unprotectedHeader = sharedUnprotectedHeader;\r\n        return this;\r\n    }\r\n    setAdditionalAuthenticatedData(aad) {\r\n        this._aad = aad;\r\n        return this;\r\n    }\r\n    async encrypt(options) {\r\n        var _a, _b, _c;\r\n        if (!this._recipients.length) {\r\n            throw new JWEInvalid('at least one recipient must be added');\r\n        }\r\n        options = { deflateRaw: options === null || options === void 0 ? void 0 : options.deflateRaw };\r\n        if (this._recipients.length === 1) {\r\n            const [recipient] = this._recipients;\r\n            const flattened = await new FlattenedEncrypt(this._plaintext)\r\n                .setAdditionalAuthenticatedData(this._aad)\r\n                .setProtectedHeader(this._protectedHeader)\r\n                .setSharedUnprotectedHeader(this._unprotectedHeader)\r\n                .setUnprotectedHeader(recipient.unprotectedHeader)\r\n                .encrypt(recipient.key, { ...recipient.options, ...options });\r\n            let jwe = {\r\n                ciphertext: flattened.ciphertext,\r\n                iv: flattened.iv,\r\n                recipients: [{}],\r\n                tag: flattened.tag,\r\n            };\r\n            if (flattened.aad)\r\n                jwe.aad = flattened.aad;\r\n            if (flattened.protected)\r\n                jwe.protected = flattened.protected;\r\n            if (flattened.unprotected)\r\n                jwe.unprotected = flattened.unprotected;\r\n            if (flattened.encrypted_key)\r\n                jwe.recipients[0].encrypted_key = flattened.encrypted_key;\r\n            if (flattened.header)\r\n                jwe.recipients[0].header = flattened.header;\r\n            return jwe;\r\n        }\r\n        let enc;\r\n        for (let i = 0; i < this._recipients.length; i++) {\r\n            const recipient = this._recipients[i];\r\n            if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, recipient.unprotectedHeader)) {\r\n                throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\r\n            }\r\n            const joseHeader = {\r\n                ...this._protectedHeader,\r\n                ...this._unprotectedHeader,\r\n                ...recipient.unprotectedHeader,\r\n            };\r\n            const { alg } = joseHeader;\r\n            if (typeof alg !== 'string' || !alg) {\r\n                throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\r\n            }\r\n            if (alg === 'dir' || alg === 'ECDH-ES') {\r\n                throw new JWEInvalid('\"dir\" and \"ECDH-ES\" alg may only be used with a single recipient');\r\n            }\r\n            if (typeof joseHeader.enc !== 'string' || !joseHeader.enc) {\r\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\r\n            }\r\n            if (!enc) {\r\n                enc = joseHeader.enc;\r\n            }\r\n            else if (enc !== joseHeader.enc) {\r\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter must be the same for all recipients');\r\n            }\r\n            validateCrit(JWEInvalid, new Map(), recipient.options.crit, this._protectedHeader, joseHeader);\r\n            if (joseHeader.zip !== undefined) {\r\n                if (!this._protectedHeader || !this._protectedHeader.zip) {\r\n                    throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\r\n                }\r\n            }\r\n        }\r\n        const cek = generateCek(enc);\r\n        let jwe = {\r\n            ciphertext: '',\r\n            iv: '',\r\n            recipients: [],\r\n            tag: '',\r\n        };\r\n        for (let i = 0; i < this._recipients.length; i++) {\r\n            const recipient = this._recipients[i];\r\n            const target = {};\r\n            jwe.recipients.push(target);\r\n            const joseHeader = {\r\n                ...this._protectedHeader,\r\n                ...this._unprotectedHeader,\r\n                ...recipient.unprotectedHeader,\r\n            };\r\n            const p2c = joseHeader.alg.startsWith('PBES2') ? 2048 + i : undefined;\r\n            if (i === 0) {\r\n                const flattened = await new FlattenedEncrypt(this._plaintext)\r\n                    .setAdditionalAuthenticatedData(this._aad)\r\n                    .setContentEncryptionKey(cek)\r\n                    .setProtectedHeader(this._protectedHeader)\r\n                    .setSharedUnprotectedHeader(this._unprotectedHeader)\r\n                    .setUnprotectedHeader(recipient.unprotectedHeader)\r\n                    .setKeyManagementParameters({ p2c })\r\n                    .encrypt(recipient.key, {\r\n                    ...recipient.options,\r\n                    ...options,\r\n                    [unprotected]: true,\r\n                });\r\n                jwe.ciphertext = flattened.ciphertext;\r\n                jwe.iv = flattened.iv;\r\n                jwe.tag = flattened.tag;\r\n                if (flattened.aad)\r\n                    jwe.aad = flattened.aad;\r\n                if (flattened.protected)\r\n                    jwe.protected = flattened.protected;\r\n                if (flattened.unprotected)\r\n                    jwe.unprotected = flattened.unprotected;\r\n                target.encrypted_key = flattened.encrypted_key;\r\n                if (flattened.header)\r\n                    target.header = flattened.header;\r\n                continue;\r\n            }\r\n            const { encryptedKey, parameters } = await encryptKeyManagement(((_a = recipient.unprotectedHeader) === null || _a === void 0 ? void 0 : _a.alg) ||\r\n                ((_b = this._protectedHeader) === null || _b === void 0 ? void 0 : _b.alg) ||\r\n                ((_c = this._unprotectedHeader) === null || _c === void 0 ? void 0 : _c.alg), enc, recipient.key, cek, { p2c });\r\n            target.encrypted_key = base64url(encryptedKey);\r\n            if (recipient.unprotectedHeader || parameters)\r\n                target.header = { ...recipient.unprotectedHeader, ...parameters };\r\n        }\r\n        return jwe;\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}